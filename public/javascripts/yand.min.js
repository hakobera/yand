var yand={isMobile:!1,init:function(){var a=this,b=$("#searchField"),c=$("#indexList"),d=$("<ul>",{id:"results"}).insertBefore(c),e=$(".category",c),f={enter:13,escape:27,up:38,down:40,left:37,right:39,array:[13,27,37,38,39,40]};b.keyup(function(e){$.inArray(e.keyCode,f.array)!==-1?a.handleKey(f,e.keyCode):a.searchIndex(b,c,d)}).focus(),$("a",c).live("click",function(b){b.preventDefault(),$("li",c).removeClass("selected"),$(this).parent().addClass("selected"),a.linkOpen($(this))}),$("a","#results").live("click",function(b){b.preventDefault(),$("li","#results").removeClass("selected"),$(this).parent().addClass("selected"),a.linkOpen($(this))}),e.each(function(){$(this).addClass("close")}),$("span:first",e).toggle(function(){a.listOpen($(this).closest(".category"))},function(){a.listClose($(this).closest(".category"))});var g=navigator.userAgent;if(g.indexOf("Mobile")!==-1&&g.indexOf("Safari")){a.isMobile=!0;var h=$(parent.window).innerHeight()-30;$("#navigation").css({height:h,"overflow-y":"scroll"})}Modernizr.history&&(window.parent.onpopstate=function(b){console.log(b);var c=b.state;a.linkOpen(c,!1)});var i=window.parent.location.search.match(/\?q=([^&]+)/);if(i){i=decodeURIComponent(i[1]).replace(/\+/g," ");if(i.length>0){b.val(i),a.searchIndex(b,c,d);var j=$("li > a",d);j.length>0&&a.linkOpen($(j[0]))}}else a.linkOpen("top.html")},handleKey:function(a,b){var c=this,d=$("#results");if(d.is(":visible")){var e=$(".selected:visible");if(e.length){b==a.up&&e.prev().length&&e.removeClass("selected").prev().addClass("selected"),b==a.down&&e.next().length&&e.removeClass("selected").next().addClass("selected");if(b==a.enter){var f=e.find("a:first").attr("href");c.linkOpen(e.find("a:first"))}b==a.right&&c.listOpen(e),b==a.left&&c.listClose(e)}else b==a.down&&(e=$("li:first",d),e.addClass("selected"))}},searchIndex:function(a,b,c){var d=a.val();d.length?(c.html("").show(),b.hide(),d=d.toLowerCase(),$(".searchable",b).each(function(){var a=$(this),b=a.text(),e=b.toLowerCase().indexOf(d);if(e!=-1&&c.text().indexOf(b)===-1){var f=$("<li>");f.append(a.parent().parent().find("a:first").clone()),c.append(f)}}),$(".selected",b).removeClass("selected"),$("li:first",c).addClass("selected")):(c.hide(),b.show())},listOpen:function(a){a.removeClass("close").children("ul").show()},listClose:function(a){a.addClass("close").children("ul").hide()},linkOpen:function(a,b){var c=this,d=typeof a=="string"?a:a.attr("href"),b=b!=undefined?b:!0,e=parent.docwin,f=e.document;$("#doc",$(f)).load(d,function(){var a=$(this);if(c.isMobile){var f=$(parent.window).innerHeight();a.css({height:f,"overflow-y":"scroll"})}var g=d.lastIndexOf("#");if(g!==-1){var h=d.substring(g);e.scrollTo(0,a.find(h.replace(/\./g,"\\.")).position().top+10),Modernizr.history&&b&&window.parent.history.pushState(d,null,h)}})}};$(function(){var a=$("#navigation").load("navigation.html",function(){yand.init()})});